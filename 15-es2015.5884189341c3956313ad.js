(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{uB5f:function(t,e,n){"use strict";n.r(e);var s=n("c7TG"),o=n("tyNb"),i=n("ofXK"),a=n("3Pt+"),r=n("Cfvw"),c=n("LRne"),l=n("cp0P"),u=n("eIep"),b=n("nYR2"),h=n("fXoL"),d=n("e8h1"),f=n("tk/3");let p=(()=>{class t{constructor(t,e,n){this.storage=t,this.http=e,this.toastController=n}checkForEvents(){return Object(r.a)(this.storage.get("fanfiction-app")).pipe(Object(u.a)(t=>{let e=JSON.parse(t);return e&&e.length>0?this.sendRequests(e).pipe(Object(b.a)(()=>{this.toastController.create({message:"Local data succesfully synced to API!",duration:3e3,position:"bottom"}).then(t=>t.present()),this.storage.remove("fanfiction-app")})):(console.log("no local events to sync"),Object(c.a)(!1))}))}storeRequest(t,e,n){this.toastController.create({message:"Your data is stored locally because you seem to be offline.",duration:3e3,position:"bottom"}).then(t=>t.present());let s={url:t,type:e,data:n,time:(new Date).getTime(),id:Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)};return this.storage.get("fanfiction-app").then(t=>{let e=JSON.parse(t);return e?e.push(s):e=[s],this.storage.set("fanfiction-app",JSON.stringify(e))})}sendRequests(t){let e=[];for(let n of t){console.log("Make one request: ",n);let t=this.http.request(n.type,n.url,n.data);e.push(t)}return Object(l.a)(e)}}return t.\u0275fac=function(e){return new(e||t)(h.dc(d.b),h.dc(f.b),h.dc(s.H))},t.\u0275prov=h.Sb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=n("mrSG"),v=n("kwrG"),w=n("2Vo4"),O=function(t){return t[t.Online=0]="Online",t[t.Offline=1]="Offline",t}({});let m=(()=>{class t{constructor(t,e,n){this.network=t,this.toastController=e,this.plt=n,this.status=new w.a(O.Offline),this.plt.ready().then(()=>{this.initializeNetworkEvents(),this.status.next("none"!==this.network.type?O.Online:O.Offline)})}initializeNetworkEvents(){this.network.onDisconnect().subscribe(()=>{this.status.getValue()===O.Online&&(console.log("WE ARE OFFLINE"),this.updateNetworkStatus(O.Offline))}),this.network.onConnect().subscribe(()=>{this.status.getValue()===O.Offline&&(console.log("WE ARE ONLINE"),this.updateNetworkStatus(O.Online))})}updateNetworkStatus(t){return Object(g.b)(this,void 0,void 0,(function*(){this.status.next(t),this.toastController.create({message:`You are now ${t==O.Offline?"Offline":"Online"}`,duration:3e3,position:"bottom"}).then(t=>t.present())}))}onNetworkChange(){return this.status.asObservable()}getCurrentNetworkStatus(){return this.status.getValue()}}return t.\u0275fac=function(e){return new(e||t)(h.dc(v.a),h.dc(s.H),h.dc(s.D))},t.\u0275prov=h.Sb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var k=n("lJxs"),D=n("vkgz"),Y=n("JIr8"),y=n("YAbo");let E=(()=>{class t{constructor(t,e,n,s){this.http=t,this.networkService=e,this.storage=n,this.offlineManager=s}getEvents(t=!1){return this.networkService.getCurrentNetworkStatus()!=O.Offline&&t?this.http.get(`${y.b}/events/events`).pipe(Object(k.a)(t=>t),Object(D.a)(t=>{this.log("fetched events"),this.setLocalData("events",t)}),Object(Y.a)(this.handleError("getEvents",[]))):Object(r.a)(this.getLocalData("categories"))}handleError(t="operation",e){return n=>(console.error(n),this.log(`${t} failed: ${n.message}`),Object(c.a)(e))}log(t){console.log(t)}setLocalData(t,e){this.storage.set(`${y.a}-${t}`,e)}getLocalData(t){return this.storage.get(`${y.a}-${t}`)}}return t.\u0275fac=function(e){return new(e||t)(h.dc(f.b),h.dc(m),h.dc(d.b),h.dc(p))},t.\u0275prov=h.Sb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Z=n("o5fY");function N(t,e){if(1&t&&(h.Zb(0,"div"),h.Zb(1,"div"),h.Zb(2,"ion-label"),h.wc(3),h.kc(4,"date"),h.Yb(),h.Zb(5,"ion-label"),h.wc(6),h.kc(7,"date"),h.Yb(),h.Yb(),h.Yb()),2&t){const t=e.$implicit;h.Mb(3),h.xc(h.mc(4,2,t,"d","fr")),h.Mb(3),h.xc(h.mc(7,6,t,"EEEE","fr"))}}function S(t,e){1&t&&(h.Zb(0,"ion-item"),h.Zb(1,"ion-avatar",4),h.Xb(2,"img",5),h.Yb(),h.Zb(3,"ion-label"),h.Zb(4,"h3"),h.wc(5,"On the politics of experience"),h.Yb(),h.Zb(6,"p"),h.wc(7,"Loren Williams"),h.Yb(),h.Zb(8,"p"),h.Xb(9,"ion-icon",6),h.wc(10," 45 min"),h.Yb(),h.Yb(),h.Yb())}const j=function(){return[1,2]};function C(t,e){1&t&&(h.Zb(0,"ion-card"),h.Zb(1,"ion-item",3),h.Zb(2,"ion-label"),h.Zb(3,"h5"),h.wc(4,"10:00 AM"),h.Yb(),h.Yb(),h.Yb(),h.vc(5,S,11,0,"ion-item",1),h.Yb()),2&t&&(h.Mb(5),h.pc("ngForOf",h.qc(1,j)))}const M=function(){return[1,2,3,4]};let L=(()=>{class t{constructor(t,e,n){this.eventDataService=t,this.datePipe=e,this.router=n,this.dateBeginActive=(new Date).getDay(),this.countWeek=1,this.countselect=0}ngOnInit(){this.initializeDates()}initializeDates(){this.dateBegin=this.getPreviousMonday(),this.dateEnd=new Date(this.dateBegin),this.dateEnd.setDate(this.dateEnd.getDate()+6),this.dates=[];const t=this.dateBegin,e=this.dateEnd;for(e.setDate(e.getDate()+60);t<=e;)this.dates.push(new Date(t)),t.setDate(t.getDate()+1)}getPreviousMonday(){const t=new Date;return t.setDate(t.getDate()-(t.getDay()+6)%7),t}}return t.\u0275fac=function(e){return new(e||t)(h.Wb(E),h.Wb(i.d),h.Wb(o.g))},t.\u0275cmp=h.Qb({type:t,selectors:[["app-agenda"]],decls:8,vars:4,consts:[[1,"header"],[4,"ngFor","ngForOf"],[1,"events"],["lines","none"],["slot","start"],["src","./assets/images/loren-williams.jpeg"],["name","time","size","small"]],template:function(t,e){1&t&&(h.Zb(0,"app-custom-header"),h.wc(1,"AGENDA"),h.Yb(),h.Zb(2,"ion-content"),h.Zb(3,"div",0),h.Zb(4,"nav"),h.vc(5,N,8,10,"div",1),h.Yb(),h.Yb(),h.Zb(6,"div",2),h.vc(7,C,6,2,"ion-card",1),h.Yb(),h.Yb()),2&t&&(h.Mb(5),h.pc("ngForOf",e.dates),h.Mb(2),h.pc("ngFor",e.card)("ngForOf",h.qc(3,M)))},directives:[Z.a,s.i,i.i,s.n,s.e,s.m,s.b,s.k],pipes:[i.d],styles:[""]}),t})();var A=n("PCNd");n.d(e,"AgendaPageModule",(function(){return F}));let F=(()=>{class t{}return t.\u0275mod=h.Ub({type:t}),t.\u0275inj=h.Tb({factory:function(e){return new(e||t)},providers:[i.d],imports:[[s.B,i.b,a.d,o.j.forChild([{path:"",component:L}]),A.a]]}),t})()}}]);