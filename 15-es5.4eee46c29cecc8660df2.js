function _createForOfIteratorHelper(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{uB5f:function(t,e,n){"use strict";n.r(e);var r,o,a,i=n("c7TG"),s=n("tyNb"),c=n("ofXK"),u=n("3Pt+"),l=n("Cfvw"),f=n("LRne"),b=n("cp0P"),h=n("eIep"),d=n("nYR2"),p=n("fXoL"),v=n("e8h1"),g=n("tk/3"),y=((r=function(){function t(e,n,r){_classCallCheck(this,t),this.storage=e,this.http=n,this.toastController=r}return _createClass(t,[{key:"checkForEvents",value:function(){var t=this;return Object(l.a)(this.storage.get("fanfiction-app")).pipe(Object(h.a)((function(e){var n=JSON.parse(e);return n&&n.length>0?t.sendRequests(n).pipe(Object(d.a)((function(){t.toastController.create({message:"Local data succesfully synced to API!",duration:3e3,position:"bottom"}).then((function(t){return t.present()})),t.storage.remove("fanfiction-app")}))):(console.log("no local events to sync"),Object(f.a)(!1))})))}},{key:"storeRequest",value:function(t,e,n){var r=this;this.toastController.create({message:"Your data is stored locally because you seem to be offline.",duration:3e3,position:"bottom"}).then((function(t){return t.present()}));var o={url:t,type:e,data:n,time:(new Date).getTime(),id:Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)};return this.storage.get("fanfiction-app").then((function(t){var e=JSON.parse(t);return e?e.push(o):e=[o],r.storage.set("fanfiction-app",JSON.stringify(e))}))}},{key:"sendRequests",value:function(t){var e,n=[],r=_createForOfIteratorHelper(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;console.log("Make one request: ",o);var a=this.http.request(o.type,o.url,o.data);n.push(a)}}catch(i){r.e(i)}finally{r.f()}return Object(b.a)(n)}}]),t}()).\u0275fac=function(t){return new(t||r)(p.dc(v.b),p.dc(g.b),p.dc(i.I))},r.\u0275prov=p.Sb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),k=n("mrSG"),w=n("kwrG"),m=n("2Vo4"),O=function(t){return t[t.Online=0]="Online",t[t.Offline=1]="Offline",t}({}),C=((o=function(){function t(e,n,r){var o=this;_classCallCheck(this,t),this.network=e,this.toastController=n,this.plt=r,this.status=new m.a(O.Offline),this.plt.ready().then((function(){o.initializeNetworkEvents(),o.status.next("none"!==o.network.type?O.Online:O.Offline)}))}return _createClass(t,[{key:"initializeNetworkEvents",value:function(){var t=this;this.network.onDisconnect().subscribe((function(){t.status.getValue()===O.Online&&(console.log("WE ARE OFFLINE"),t.updateNetworkStatus(O.Offline))})),this.network.onConnect().subscribe((function(){t.status.getValue()===O.Offline&&(console.log("WE ARE ONLINE"),t.updateNetworkStatus(O.Online))}))}},{key:"updateNetworkStatus",value:function(t){return Object(k.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.status.next(t),this.toastController.create({message:"You are now ".concat(t==O.Offline?"Offline":"Online"),duration:3e3,position:"bottom"}).then((function(t){return t.present()}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"onNetworkChange",value:function(){return this.status.asObservable()}},{key:"getCurrentNetworkStatus",value:function(){return this.status.getValue()}}]),t}()).\u0275fac=function(t){return new(t||o)(p.dc(w.a),p.dc(i.I),p.dc(i.E))},o.\u0275prov=p.Sb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),E=n("lJxs"),D=n("vkgz"),Y=n("JIr8"),S=n("YAbo"),_=((a=function(){function t(e,n,r,o){_classCallCheck(this,t),this.http=e,this.networkService=n,this.storage=r,this.offlineManager=o}return _createClass(t,[{key:"getEvents",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.networkService.getCurrentNetworkStatus()!=O.Offline&&e?this.http.get("".concat(S.b,"/events/events")).pipe(Object(E.a)((function(t){return t})),Object(D.a)((function(e){t.log("fetched events"),t.setLocalData("events",e)})),Object(Y.a)(this.handleError("getEvents",[]))):Object(l.a)(this.getLocalData("categories"))}},{key:"handleError",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"operation",n=arguments.length>1?arguments[1]:void 0;return function(r){return console.error(r),t.log("".concat(e," failed: ").concat(r.message)),Object(f.a)(n)}}},{key:"log",value:function(t){console.log(t)}},{key:"setLocalData",value:function(t,e){this.storage.set("".concat(S.a,"-").concat(t),e)}},{key:"getLocalData",value:function(t){return this.storage.get("".concat(S.a,"-").concat(t))}}]),t}()).\u0275fac=function(t){return new(t||a)(p.dc(g.b),p.dc(C),p.dc(v.b),p.dc(y))},a.\u0275prov=p.Sb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),A=n("o5fY");function Z(t,e){if(1&t&&(p.Zb(0,"div"),p.Zb(1,"div"),p.Zb(2,"ion-label"),p.wc(3),p.kc(4,"date"),p.Yb(),p.Zb(5,"ion-label"),p.wc(6),p.kc(7,"date"),p.Yb(),p.Yb(),p.Yb()),2&t){var n=e.$implicit;p.Mb(3),p.xc(p.mc(4,2,n,"d","fr")),p.Mb(3),p.xc(p.mc(7,6,n,"EEEE","fr"))}}function j(t,e){1&t&&(p.Zb(0,"ion-item"),p.Zb(1,"ion-avatar",4),p.Xb(2,"img",5),p.Yb(),p.Zb(3,"ion-label"),p.Zb(4,"h3"),p.wc(5,"On the politics of experience"),p.Yb(),p.Zb(6,"p"),p.wc(7,"Loren Williams"),p.Yb(),p.Zb(8,"p"),p.Xb(9,"ion-icon",6),p.wc(10," 45 min"),p.Yb(),p.Yb(),p.Yb())}var I=function(){return[1,2]};function N(t,e){1&t&&(p.Zb(0,"ion-card"),p.Zb(1,"ion-item",3),p.Zb(2,"ion-label"),p.Zb(3,"h5"),p.wc(4,"10:00 AM"),p.Yb(),p.Yb(),p.Yb(),p.vc(5,j,11,0,"ion-item",1),p.Yb()),2&t&&(p.Mb(5),p.pc("ngForOf",p.qc(1,I)))}var L,M=function(){return[1,2,3,4]},P=((L=function(){function t(e,n,r){_classCallCheck(this,t),this.eventDataService=e,this.datePipe=n,this.router=r,this.dateBeginActive=(new Date).getDay(),this.countWeek=1,this.countselect=0}return _createClass(t,[{key:"ngOnInit",value:function(){this.initializeDates()}},{key:"initializeDates",value:function(){this.dateBegin=this.getPreviousMonday(),this.dateEnd=new Date(this.dateBegin),this.dateEnd.setDate(this.dateEnd.getDate()+6),this.dates=[];var t=this.dateBegin,e=this.dateEnd;for(e.setDate(e.getDate()+60);t<=e;)this.dates.push(new Date(t)),t.setDate(t.getDate()+1)}},{key:"getPreviousMonday",value:function(){var t=new Date;return t.setDate(t.getDate()-(t.getDay()+6)%7),t}}]),t}()).\u0275fac=function(t){return new(t||L)(p.Wb(_),p.Wb(c.d),p.Wb(s.g))},L.\u0275cmp=p.Qb({type:L,selectors:[["app-agenda"]],decls:8,vars:4,consts:[[1,"header"],[4,"ngFor","ngForOf"],[1,"events"],["lines","none"],["slot","start"],["src","./assets/images/loren-williams.jpeg"],["name","time","size","small"]],template:function(t,e){1&t&&(p.Zb(0,"app-custom-header"),p.wc(1,"AGENDA"),p.Yb(),p.Zb(2,"ion-content"),p.Zb(3,"div",0),p.Zb(4,"nav"),p.vc(5,Z,8,10,"div",1),p.Yb(),p.Yb(),p.Zb(6,"div",2),p.vc(7,N,6,2,"ion-card",1),p.Yb(),p.Yb()),2&t&&(p.Mb(5),p.pc("ngForOf",e.dates),p.Mb(2),p.pc("ngFor",e.card)("ngForOf",p.qc(3,M)))},directives:[A.a,i.i,c.i,i.n,i.e,i.m,i.b,i.k],pipes:[c.d],styles:[""]}),L),F=n("PCNd");n.d(e,"AgendaPageModule",(function(){return R}));var T,R=((T=function t(){_classCallCheck(this,t)}).\u0275mod=p.Ub({type:T}),T.\u0275inj=p.Tb({factory:function(t){return new(t||T)},providers:[c.d],imports:[[i.B,c.b,u.d,s.j.forChild([{path:"",component:P}]),F.a]]}),T)}}]);